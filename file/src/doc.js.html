<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <base data-ice="baseUrl" href="../../">
  <title data-ice="title">src/doc.js | node-influx API Document</title>
  <link type="text/css" rel="stylesheet" href="css/style.css">
  <link type="text/css" rel="stylesheet" href="css/prettify-tomorrow.css">
  <script src="script/prettify/prettify.js"></script>
  
  
  <script src="script/manual.js"></script>
</head>
<body class="layout-container" data-ice="rootContainer">

<header>
  <a href="./">Home</a>
  <a href="./manual/index.html" data-ice="manualHeaderLink">Manual</a>
  <a href="identifiers.html">Reference</a>
  <a href="source.html">Source</a>
  <a href="test.html" data-ice="testLink">Test</a>
  
  <div class="search-box">
  <span>
    <img src="./image/search.png">
    <span class="search-input-edge"></span><input class="search-input"><span class="search-input-edge"></span>
  </span>
    <ul class="search-result"></ul>
  </div>
</header>

<nav class="navigation" data-ice="nav"><div>
  <ul>
    
  <li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/builder.js~Expression.html">Expression</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/builder.js~Measurement.html">Measurement</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/index.js~InfluxDB.html">InfluxDB</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/pool.js~Pool.html">Pool</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/pool.js~RequestError.html">RequestError</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/pool.js~ServiceNotAvailableError.html">ServiceNotAvailableError</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/results.js~ResultError.html">ResultError</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-interface">I</span><span data-ice="name"><span><a href="class/src/doc.js~IBackoffStrategy.html">IBackoffStrategy</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-interface">I</span><span data-ice="name"><span><a href="class/src/doc.js~INanoDate.html">INanoDate</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-interface">I</span><span data-ice="name"><span><a href="class/src/doc.js~IResults.html">IResults</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-IClusterConfig">IClusterConfig</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-IPingStats">IPingStats</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-IPoint">IPoint</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-IPoolOptions">IPoolOptions</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-IQueryOptions">IQueryOptions</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-ISchemaOptions">ISchemaOptions</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-ISingleHostConfig">ISingleHostConfig</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-IWriteOptions">IWriteOptions</a></span></span></li>
<li data-ice="doc"><div data-ice="dirPath" class="nav-dir-path">backoff</div><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/backoff/exponential.js~ExponentialBackoff.html">ExponentialBackoff</a></span></span></li>
<li data-ice="doc"><div data-ice="dirPath" class="nav-dir-path">grammar</div><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/grammar/ds.js~Raw.html">Raw</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-toNanoDate">toNanoDate</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-escape">escape</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-Precision">Precision</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-FieldType">FieldType</a></span></span></li>
</ul>
</div>
</nav>

<div class="content" data-ice="content"><h1 data-ice="title">src/doc.js</h1>
<pre class="source-code line-number raw-source-code"><code class="prettyprint linenums" data-ice="content">/**
 * Pool options can be passed into the database to configure the behaviour
 * of the connection pool.
 * @typedef {Object} IPoolOptions
 * @property {Number} [maxRetries=2] Number of times we should retry running
 *     a query before calling back with an error.
 * @property {Number} [requestTimeout=30000] The length of time after which
 *     HTTP requests will error if they do not receive a response.
 * @property {IBackoffStrategy} [backoff] The backoff strategy to use for
 *     unhealthy connections. Defaults to an exponential backoff with an
 *     initial delay of 300ms and a maximum delay of 10 seconds.
 */
/**
 * A ISingleHostConfig can be provided into `new InfluxDB(config)` when you
 * have a single Influx address to connect to.
 *
 * @public
 * @typedef {Object} ISingleHostConfig
 * @property {String} [username=&apos;root&apos;] Username for connecting to the database.
 * @property {String} [password=&apos;root&apos;] Password for connecting to the database.
 * @property {String} [database] Default database to operate on. Providing this
 *     will let you omit database names in most operations, and is convenient
 *     if your app is primarily dealing with a single database.
 * @property {String} [host=&apos;127.0.0.1&apos;] Influx host to connect to.
 * @property {Number} [port=8060] Influx port to connect to.
 * @property {String} [protocol=&apos;http&apos;] Protocol to connect over, either
 *     &apos;http&apos; or &apos;https&apos;.
 * @property {IPoolOptions} [pool] Options for the connection pool.
 * @property {ISchemaOptions[]} [schema] An optional list of data schema to use.
 *
 * @example
 * import { InfluxDB } from &apos;influx&apos;; // or const InfluxDB = require(&apos;influx&apos;).InfluxDB
 *
 * // Connect to a single host with a full set of config details and
 * // a custom schema
 * const client = new InfluxDB({
 *   database: &apos;my_db&apos;,
 *   host: &apos;localhost&apos;,
 *   port: 8086,
 *   username: &apos;connor&apos;,
 *   password: &apos;pa$$w0rd&apos;,
 *   schema: [{
 *     measurement: &apos;perf&apos;,
 *     tags: [&apos;hostname&apos;],
 *     fields: {
 *       memory_usage: FieldType.INTEGER,
 *       cpu_usage: FieldType.FLOAT,
 *       is_online: FieldType.BOOLEAN,
 *     }
 *   }]
 * })
 */
/**
 * A IClusterConfig can be provided into `new InfluxDB(config)` when you
 * have a multiple Influx nodes to connect to.
 *
 * @typedef {Object} IClusterConfig
 * @property {String} [username=&apos;root&apos;] Username for connecting to the database.
 * @property {String} [password=&apos;root&apos;] Password for connecting to the database.
 * @property {String} [database] Default database to operate on. Providing this
 *     will let you omit database names in most operations, and is convenient
 *     if your app is primarily dealing with a single database.
 * @property {Array} hosts A list of Influx hosts to connect to.
 * @property {String} [hosts.host=&apos;127.0.0.1&apos;] Influx host to connect to.
 * @property {Number} [hosts.port=8060] Influx port to connect to.
 * @property {String} [hosts.protocol=&apos;http&apos;] Protocol to connect over, either
 *     &apos;http&apos; or &apos;https&apos;.
 * @property {IPoolOptions} [pool] Options for the connection pool.
 * @property {ISchemaOptions[]} [schema] An optional list of data schema to use.
 *
 * @example
 * import { InfluxDB } from &apos;influx&apos;; // or const InfluxDB = require(&apos;influx&apos;).InfluxDB
 *
 * // Connect to a single host with a full set of config details and
 * // a custom schema
 * const client = new InfluxDB({
 *   database: &apos;my_db&apos;,
 *   username: &apos;connor&apos;,
 *   password: &apos;pa$$w0rd&apos;,
 *   hosts: [
 *     { host: &apos;db1.example.com&apos; },
 *     { host: &apos;db2.example.com&apos; },
 *   ]
 *   schema: [{
 *     measurement: &apos;perf&apos;,
 *     tags: [&apos;hostname&apos;],
 *     fields: {
 *       memory_usage: FieldType.INTEGER,
 *       cpu_usage: FieldType.FLOAT,
 *       is_online: FieldType.BOOLEAN,
 *     }
 *   }]
 * })
 */
/**
 * Schema options can be passed into the `new InfluxDB()` constructor to
 * help define the shape of your data. Each schema config corresponds to
 * a measurement in Influx
 *
 * It&apos;s recommended, but not required, that you make use of schema; internally
 * we use them to be smarter about coercing your data, and providing immediate
 * error feedback if you try to write data which doesn&apos;t fit in your schema:
 * either if you include tags of fields which are not present in your schema,
 * or you enter the wrong datatype for one of your schema fields.
 *
 * @typedef {Object} ISchemaOptions
 * @property {String} [database] The database where the measurement lives. This
 *     is required if you don&apos;t provide a default database in Influx.
 * @property {String} measurement The measurement name in Influx this refers to
 * @property {Object.&lt;String, FieldType&gt;} fields A mapping of fields names to
 *     their data types. It&apos;s assumed that this is a comprehensive mapping of
 *     every field you might write.
 * @property {String[]} tags A list of tag names in this measurement. It&apos;s
 *     assumed that this is a comprehensive list of every tag you might write.
 *
 * @example
 * {
 *   measurement: &apos;perf&apos;,
 *   tags: [&apos;hostname&apos;],
 *   fields: {
 *     memory_usage: FieldType.INTEGER,
 *     cpu_usage: FieldType.FLOAT,
 *     is_online: FieldType.BOOLEAN,
 *   }
 * }
 */
/**
 * IResults are returned from the .query method. It marshals the raw Influx
 * results into a more palatable, JavaScript-y structure. All query results
 * are marshalled into a single, flat arrays, and methods are provided to
 * example grouped results as necessary. The `time` column, if included, is
 * converted into a {@link INanoDate}.
 *
 * @interface
 * @example
 * influx.query(&apos;select host, cpu, mem from perf&apos;).then(results =&gt; {
 *   expect(results).to.deep.equal([
 *     { host: &apos;ares.peet.io&apos;, cpu: 0.12, mem: 2435 },
 *     { host: &apos;ares.peet.io&apos;, cpu: 0.10, mem: 2451 },
 *     // ...
 *   ])
 * })
 */
export class IResults extends Array {
    /**
     * Group looks for and returns the first group in the results
     * that matches the provided tags.
     *
     * If you&apos;ve used lodash or underscore, we do something quite similar to
     * their object matching: for every row in the results, if it contains tag
     * values matching the requested object, we return it.
     *
     * @param  {Object.&lt;String, String&gt;} matcher
     * @return {T[]}
     * @example
     * // Matching tags sets in queries:
     * influx.query(&apos;select * from perf group by host&apos;).then(results =&gt; {
     *   expect(results.group({ host: &apos;ares.peet.io&apos;})).to.deep.equal([
     *     { host: &apos;ares.peet.io&apos;, cpu: 0.12, mem: 2435 },
     *     { host: &apos;ares.peet.io&apos;, cpu: 0.10, mem: 2451 },
     *     // ...
     *   ])
     *
     *   expect(results.group({ host: &apos;box1.example.com&apos;})).to.deep.equal([
     *     { host: &apos;box1.example.com&apos;, cpu: 0.54, mem: 8420 },
     *     // ...
     *   ])
     * })
     */
    group(matcher) { return null; }
    /**
     * Returns the data grouped into nested arrays, similarly to how it was
     * returned from Influx originally.
     *
     * @returns {Array&lt;{ name: String, tags: Object.&lt;String, String&gt;, rows: T[] }&gt;}
     * @example
     * influx.query(&apos;select * from perf group by host&apos;).then(results =&gt; {
     *   expect(results.groups()).to.deep.equal([
     *     {
     *       name: &apos;perf&apos;,
     *       tags: { host: &apos;ares.peet.io&apos; },
     *       rows: [
     *         { host: &apos;ares.peet.io&apos;, cpu: 0.12, mem: 2435 },
     *         { host: &apos;ares.peet.io&apos;, cpu: 0.10, mem: 2451 },
     *         // ...
     *       ]
     *     }
     *     {
     *       name: &apos;perf&apos;,
     *       tags: { host: &apos;box1.example.com&apos; },
     *       rows: [
     *         { host: &apos;box1.example.com&apos;, cpu: 0.54, mem: 8420 },
     *         // ...
     *       ]
     *     }
     *   ])
     * })
     */
    groups() { return null; }
}
/**
 * IPoint is passed to the client&apos;s write methods to store a point in InfluxDB.
 *
 * @typedef {Object} IPoint
 * @property {String} measurement Measurement is the Influx measurement name.
 * @property {Object.&lt;String, String&gt;} [tags] Tags is the list of tag
 *     values to insert.
 * @property {Object.&lt;String, *&gt;} [fields] Fields is the list of
 *     field values to insert.
 * @property {Date|string|number} [fields] Timestamp tags this measurement with
 *     a date. This can be a Date object, in which case we&apos;ll adjust it to the
 *     desired precision, or a numeric string or number, in which case
 *     it gets passed directly to Influx.
 */
/**
 * IWriteOptions configure how points are written in the database.
 *
 * @typedef {Object} IWriteOptions
 * @property {TimePrecision} [precision] Precision at which the points are
 *     written, defaults to milliseconds &apos;ms&apos;. Influx recommends that you use
 *     the coarsest precision possible in order to maximize efficiency.
 * @property {String} [retentionPolicy] The retention policy to insert
 *     the points under, uses the DEFAULT policy if not provided.
 * @property {String} [database] The database to insert the points in, uses the
 *     adapter&apos;s default database if not provided.
 */
/**
 * The IQueryOptions allow you to configure how queries are run against Influx.
 *
 * @typedef {Object} IQueryOptions
 * @property {TimePrecision} [precision] Defines the precision at which
 *     to query points. Defaults to querying in nanosecond precision.
 * @property {String} [retentionPolicy] Retention policy to query from,
 *     defaults to the DEFAULT retention policy.
 * @property {String} [database]  Database under which to query the points.
 *     This is required if a database is not provided in Influx client.
 */
/**
 * IPingStats is returned from {@link InfluxDB#ping}.
 *
 * @typedef {Object} IPingStats
 * @property {Url} url URL is the host&apos;s URL
 * @property {Boolean} online Whether the request was completed successfully.
 * @property {http.ServerResponse} res The raw response from the server, may be
 *     null on a timeout or HTTP error.
 * @property {Number} rtt Total time the server took to respond, in milliseconds
 * @property {String} version Version number the server reports to run
 */
/**
 * The IBackoffStrategy dictates behaviour to use when hosts in the connection
 * pool start failing. We remove them from the pool for a duration of time
 * specified by the backoff strategy.
 *
 * The strategy itself is immutable, and each method call should return a new
 * strategy without modifying the original one.
 *
 * @interface
 * @example
 * let backoff = new MyBackoffStrategy();
 * console.log(backoff.getDelay()); // =&gt; 10
 * backoff = backoff.next();
 * console.log(backoff.getDelay()); // =&gt; 20
 * backoff = backoff.reset();
 * console.log(backoff.getDelay()); // =&gt; 10
 */
export class IBackoffStrategy {
    /**
     * getDelay returns the amount of delay of the current backoff.
     * @return {Number}
     */
    getDelay() { return 0; }
    /**
     * Next is called when a failure occurs on a host to
     * return the next backoff amount.
     * @return {IBackoffStrategy}
     */
    next() { return this; }
    /**
     * Returns a strategy with a reset backoff counter.
     * @return {IBackoffStrategy}
     */
    reset() { return this; }
}
/**
 * An INanoDate is a type of Date that holds a nanosecond-precision unix
 * timestamp. It&apos;s the default date type parsed in {@link IResults} and
 * can be created manually using {@link toNanoDate}.
 * @interface
 */
export class INanoDate extends Date {
    /**
     * Returns the unix nanoseconds timestamp as a string.
     * @example
     * const date = toNanoDate(&apos;1475985480231035677&apos;)
     * expect(date.getNanoTime()).to.equal(&apos;1475985480231035677&apos;)
     */
    getNanoTime() { return &apos;&apos;; }
    ;
    /**
     * Formats the date as an ISO RFC3339 timestamp with nanosecond precision.
     * @example
     * const date = toNanoDate(&apos;1475985480231035677&apos;)
     * expect(date.toNanoISOString()).to.equal(&apos;2016-10-09T03:58:00.231035677Z&apos;)
     */
    toNanoISOString() { return &apos;&apos;; }
    ;
}
</code></pre>

</div>

<footer class="footer">
  Generated by <a href="https://esdoc.org">ESDoc<span data-ice="esdocVersion">(0.4.8)</span></a>
</footer>

<script src="script/search_index.js"></script>
<script src="script/search.js"></script>
<script src="script/pretty-print.js"></script>
<script src="script/inherited-summary.js"></script>
<script src="script/test-summary.js"></script>
<script src="script/inner-link.js"></script>
<script src="script/patch-for-local.js"></script>
</body>
</html>
